function mainmenu(){document.getElementById("gamestarter").onclick=gameStart}function gameStart(){document.getElementById("mainMenu").style.display="none",document.getElementById("startMenu").style.display="none",document.getElementById("gameWindow").onmousemove=getMouseCords,document.getElementById("gameWindow").onclick=addBullet,document.body.onkeydown=function(a){keys[a.keyCode]=!0},document.body.onkeyup=function(a){keys[a.keyCode]=!1},updateInterval=setInterval(update,17),enemiesInterval=setInterval(addEnemies,2e3)}function update(){windowResize(),canvasClear(),drawLevel(),playerMove(),drawBullets(),playerDraw(mouse.x,mouse.y),drawEnemies(),drawStatistics()}function windowResize(){ctx.canvas.width=window.innerWidth,ctx.canvas.height=window.innerHeight}function canvasClear(){ctx.beginPath(),ctx.fillStyle="#ecf0f1",ctx.rect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.fill()}function drawLevel(){ctx.beginPath();for(var a=0;a<6e3;a+=100)ctx.moveTo(a-bredde,0),ctx.lineTo(a-bredde,5e3);for(var a=0;a<5e3;a+=100)ctx.moveTo(0,a-hoyde),ctx.lineTo(5e3,a-hoyde);ctx.lineWidth=1,ctx.strokeStyle="#95a5a6",ctx.stroke(),ctx.fillStyle="#bdc3c7",ctx.rect(0,0,ctx.canvas.width/2-bredde,5e3),ctx.rect(4e3,0,ctx.canvas.width/2-bredde,5e3),ctx.rect(0,0,4e3,ctx.canvas.height/2-hoyde),ctx.rect(0,4e3,4e3,ctx.canvas.height/2-hoyde),ctx.fill()}function playerMove(){keys[68]&&(bredde+=5),keys[65]&&(bredde-=5),keys[83]&&(hoyde+=5),keys[87]&&(hoyde-=5),bredde<0&&(bredde=0),bredde>4e3&&(bredde=4e3),hoyde>4e3&&(hoyde=4e3),hoyde<0&&(hoyde=0)}function playerDraw(a,b){ctx.setTransform(1,0,0,1,ctx.canvas.width/2,ctx.canvas.height/2),ctx.rotate(Math.atan2(b-ctx.canvas.height/2,a-ctx.canvas.width/2)-Math.PI/2+1.57),ctx.beginPath(),ctx.fillStyle="#3498db",ctx.lineWidth=5,ctx.strokeStyle="#2f83b2",ctx.rect(40,-15,30,30),ctx.arc(0,0,40,0,2*Math.PI),ctx.fill(),ctx.stroke(),ctx.setTransform(1,0,0,1,0,0)}function getMouseCords(a){mouse.x=a.clientX,mouse.y=a.clientY}function addBullet(){var a={x:ctx.canvas.width/2,y:ctx.canvas.height/2,angle:Math.atan2(mouse.y-ctx.canvas.height/2,mouse.x-ctx.canvas.width/2)-Math.PI/2+1.57};bullets.push(a)}function drawBullets(){for(var a=0;a<bullets.length;a++){keys[68]&&(bullets[a].x-=5),keys[65]&&(bullets[a].x+=5),keys[83]&&(bullets[a].y-=5),keys[87]&&(bullets[a].y+=5),ctx.beginPath(),ctx.fillStyle="#3498db",ctx.lineWidth=5,ctx.strokeStyle="#2f83b2",ctx.arc(bullets[a].x,bullets[a].y,10,0,2*Math.PI),ctx.fill(),ctx.stroke(),(bullets[a].x>4e3||bullets[a].x<0||bullets[a].y>4e3||bullets[a].y<0)&&bullets.splice(a,1),bullets[a].x+=10*Math.cos(bullets[a].angle),bullets[a].y+=10*Math.sin(bullets[a].angle);for(var b=0;b<enemies.length;b++)enemies[b].x>bullets[a].x-70&&enemies[b].x<bullets[a].x+70&&enemies[b].y>bullets[a].y-70&&enemies[b].y<bullets[a].y+70&&(enemies.splice(b,1),bullets.splice(a,1),score++)}}function drawEnemies(){for(var a=0;a<enemies.length;a++)enemies[a].x<ctx.canvas.width/2?enemies[a].x+=4:enemies[a].x-=4,enemies[a].y<ctx.canvas.height/2?enemies[a].y+=4:enemies[a].y-=4,keys[68]&&(enemies[a].x-=5),keys[65]&&(enemies[a].x+=5),keys[83]&&(enemies[a].y-=5),keys[87]&&(enemies[a].y+=5),enemies[a].x>ctx.canvas.width/2-70&&enemies[a].x<ctx.canvas.width/2+70&&enemies[a].y>ctx.canvas.height/2-70&&enemies[a].y<ctx.canvas.height/2+70&&endGame(),ctx.beginPath(),ctx.fillStyle="#e74c3c",ctx.lineWidth=5,ctx.strokeStyle="#c0392b",ctx.arc(enemies[a].x,enemies[a].y,40,0,2*Math.PI),ctx.fill(),ctx.stroke()}function drawStatistics(){frames++,ctx.fillStyle="black",ctx.font="20px Arial",ctx.fillText("X:"+bredde+" Y:"+hoyde,10,50),ctx.fillText("Frames Rendered:"+frames,10,100),ctx.fillText(Math.atan2(mouse.y-ctx.canvas.height/2,mouse.x-ctx.canvas.width/2)-Math.PI/2+1.57,10,150),ctx.fillText("Canvas width: "+ctx.canvas.width+"px",10,200),ctx.fillText("Canvas height: "+ctx.canvas.height+"px",10,250),ctx.fillText("Score: "+score,10,300)}function addEnemies(){var a={x:0-bredde,y:0-hoyde};enemies.push(a),a={x:4e3-bredde,y:0-hoyde},enemies.push(a),a={x:0-bredde,y:4e3-hoyde},enemies.push(a),a={x:4e3-bredde,y:4e3-hoyde},enemies.push(a)}function endGame(){clearInterval(updateInterval),clearInterval(addEnemies),document.getElementById("gameWindow").style.display="none",document.getElementById("mainMenu").style.display="flex",document.getElementById("displayScore").innerHTML="Din poengsum ble: "+score+" poeng",document.getElementById("endMenu").style.display="inline-block"}window.onload=mainmenu;var bredde=2e3,hoyde=2e3,mouse={x:0,y:0},enemies=[],bullets=[],score=0,frames=0,keys=[],updateInterval,enemiesInterval,ctx=document.getElementById("gameWindow").getContext("2d");